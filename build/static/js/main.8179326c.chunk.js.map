{"version":3,"sources":["components/Header.tsx","data/enums/messages.enum.ts","components/Body.tsx","components/Notification.tsx","components/Form.tsx","components/WelcomeArea.tsx","components/Message.tsx","components/MessageList.tsx","components/ChatArea.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Header","MESSAGES","props","className","title","Body","children","Notification","type","elem","message","Form","form","onSubmit","onFormSubmit","class","method","name","autoComplete","input","placeholder","aria-label","ariaLabel","value","inputValue","onChange","event","onInputChange","buttonText","WecomeArea","isVisible","e","onNameChange","onNameSubmit","hasAnyConnectionError","notification","Message","chatBoxRef","useRef","useEffect","current","scrollIntoView","document","querySelector","scrollTop","sender","ref","MessageList","messages","length","map","item","index","id","ChatArea","chat","typing","enabled","messageOut","onMessageChange","onMessageSend","socket","io","transports","App","useState","TITLE","setTitle","connected","setConnected","setName","setMessageOut","setChat","setTyping","setNotification","setHasAnyConnectionError","on","setTimeout","handleMessageOut","out","emit","preventDefault","success","WELCOME","err","target","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8179326c.chunk.js","sourcesContent":["function Header(props: any) {\n  return (\n    <header className=\"App-header\">\n    <h1>\n      {props.title}\n    </h1>\n  </header>\n  );\n}\n\nexport default Header;\n","export enum MESSAGES {\n    TITLE = `Silviu's Chat Application`,\n    WELCOME = `Welcome, `\n}","export default function Body(props: any) {\n  return (\n    <main>\n      <div>{props.children}</div>\n    </main>\n  );\n}\n","export default function Notification(props: any) {\n    return (\n      <div className={props.type}>\n          <props.elem>{props.message}</props.elem>\n      </div>\n    );\n  }","export default function Form(props: any) {\n  const { form } = props;\n  return (\n    <form\n        onSubmit={props.onFormSubmit}\n        className={form.class}\n        method=\"POST\">\n        <input\n            type=\"text\"\n            name=\"name\"\n            autoComplete=\"off\"\n            className={form.input.class}\n            placeholder={form.input.placeholder}\n            aria-label={form.input.ariaLabel}\n            value={props.inputValue}\n            onChange={event => props.onInputChange(event)}\n        />\n        <button type=\"submit\" className=\"button\">\n            {form.buttonText}\n        </button>\n    </form>\n  );\n}\n","import Notification from './Notification';\nimport Form from './Form';\n\nexport default function WecomeArea(props: any) {\n  const form = {\n    input: {\n      placeholder: 'Please enter your name...',\n      ariaLabel: 'Enter a name to be used in the chat room',\n      class: 'welcome-area-form-input',\n    },\n    buttonText: 'Send',\n    class: \"welcome-area-form\"\n  };\n\n  const onInputChange = (e: Event) => {\n    props.onNameChange(e);\n  }\n\n  const onFormSubmit = (e: Event) => {\n      props.onNameSubmit(e);\n  }\n\n  return props.isVisible ? (\n    <>\n      <div className=\"welcome-area\">\n        <Form\n            form={form}\n            inputValue={props.name}\n            onInputChange={onInputChange}\n            onFormSubmit={onFormSubmit}>\n        </Form>\n      </div>\n      {props.hasAnyConnectionError ? <Notification type=\"error\" elem=\"p\" message={props.notification.message} /> : null}\n    </>\n  ) : null;\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function Message(props: any) {\n  const chatBoxRef = useRef<any>();\n\n  const updateScrollPos = (): void => {\n    chatBoxRef.current.scrollIntoView(true);\n    document.querySelector<any>('.chat-area .chat-area-box').scrollTop += 10;\n  };\n\n  useEffect(() => {\n    if (chatBoxRef && chatBoxRef.current) {\n      updateScrollPos();\n    }\n  });\n\n  return (\n    <div className={props.type}>\n      <div className=\"sender\">{props.sender}</div>\n      <div className=\"message\">\n        <span ref={chatBoxRef}>{props.message}</span>\n      </div>\n    </div>\n  );\n}\n","import Message from './Message';\n\nexport default function MessageList(props: any) {\n    return props.messages.length > 0 ? (\n      <div className=\"message-list\">\n        {props.messages.map((item: any, index: number) => {\n            return (\n              <Message\n                key={item.id || index}\n                type={item.type}\n                sender={item.name || null}\n                message={item.message} />\n              );\n        })}\n      </div>\n    ): null;\n  }","import MessageList from './MessageList';\nimport Notification from './Notification';\nimport Form from './Form';\n\nexport default function ChatArea(props: any) {\n\n  const form = {\n    input: {\n      placeholder: 'Write a message ...',\n      ariaLabel: 'Enter message to send',\n      class: 'chat-area-form-input',\n    },\n    buttonText: 'Send',\n    class: 'chat-area-form',\n  };\n\n  const onInputChange = (e: Event) => {\n    props.onMessageChange(e);\n  };\n\n  const onFormSubmit = (e: Event) => {\n    props.onMessageSend(e);\n  };\n\n  return props.isVisible ? (\n    <div className=\"chat-area\">\n      <div className=\"chat-area-box\">\n        <MessageList messages={props.chat} />\n        {props.typing.enabled ? <Notification\n          type=\"temporary\"\n          elem=\"span\"\n          message={props.typing.message} /> : null }\n      </div>\n      <div className=\"chat-area-form-wrapper\">\n        <Form\n            form={form}\n            inputValue={props.messageOut}\n            onInputChange={onInputChange}\n            onFormSubmit={onFormSubmit}>\n        </Form>\n      </div>\n    </div>\n  ) : null;\n}\n","import { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\n\nimport './App.scss';\nimport Header from './components/Header';\nimport Body from './components/Body';\nimport WelcomeArea from './components/WelcomeArea';\nimport ChatArea from './components/ChatArea';\n\nimport { MESSAGES } from './data/enums/messages.enum';\nimport { Notification } from './data/models/notification.model';\n\nconst socket = io('/', { transports: ['polling'] });\n\nfunction App() {\n  const [title, setTitle] = useState<MESSAGES | string>(MESSAGES.TITLE);\n  const [connected, setConnected] = useState<boolean>(false);\n  const [name, setName] = useState<string>('');\n  const [messageOut, setMessageOut] = useState<string>('');\n  const [chat, setChat] = useState<any[]>([]);\n  const [typing, setTyping] = useState<{ message: string; enabled: boolean }>({\n    message: '',\n    enabled: false,\n  });\n  const [notification, setNotification] = useState<Notification>({ message: '', type: 'message' });\n  const [hasAnyConnectionError, setHasAnyConnectionError] = useState<boolean>(false);\n\n  useEffect(() => {\n    socket.on('message', ({ message, sender }: any) => {\n      setChat(chat => [\n        ...chat,\n        {\n          id: chat.length + 1,\n          name: sender,\n          message,\n          type: 'message-in',\n        },\n      ]);\n      setTyping({\n        enabled: false,\n        message: '',\n      });\n    });\n\n    socket.on('typing', (message: string) => {\n      setTyping({\n        enabled: true,\n        message,\n      });\n      setTimeout((): void => {\n        setTyping({\n          enabled: false,\n          message: '',\n        });\n      }, 4000);\n    });\n  }, []);\n\n  const joinRoom = (e: Event) => {\n    if (e) {\n      e.preventDefault();\n    }\n    if (!connected) {\n      socket.emit('join room', { name });\n      socket.on('connection success', (success: string) => {\n        setConnected(true);\n        setTitle(MESSAGES.WELCOME + name);\n        setNotification({\n          message: success,\n          type: 'message',\n        });\n        setChat(chat => [\n          ...chat,\n          {\n            id: chat.length + 1,\n            message: success,\n            type: 'notification',\n          },\n        ]);\n        setHasAnyConnectionError(false);\n      });\n      socket.on('connection error', (err: string) => {\n        setConnected(false);\n        setNotification({\n          message: err,\n          type: 'error',\n        });\n        setHasAnyConnectionError(true);\n      });\n    }\n  };\n\n  const sendMessage = (e: Event) => {\n    if (e) {\n      e.preventDefault();\n    }\n    if (connected) {\n      handleMessageOut();\n    }\n  };\n\n  const handleMessageOut = (): void => {\n    const out = {\n      id: chat.length + 1,\n      name,\n      message: messageOut,\n      type: 'message-out',\n    };\n    socket.emit('send message', out);\n    setChat([\n      ...chat, \n      out\n    ]);\n    setTyping({\n      enabled: false,\n      message: '',\n    });\n    setMessageOut('');\n  };\n\n  const onNameChange = (e: Event): void => {\n    setName((e.target as HTMLTextAreaElement).value || '');\n  };\n\n  const onMessageChange = (e: Event): void => {\n    socket.emit('start typing', { name });\n    setMessageOut((e.target as HTMLTextAreaElement).value || '');\n  };\n\n  return (\n    <div className=\"App\">\n      <Header title={title}></Header>\n      <Body>\n        <WelcomeArea\n          isVisible={!connected}\n          name={name}\n          onNameSubmit={joinRoom}\n          onNameChange={onNameChange}\n          hasAnyConnectionError={hasAnyConnectionError}\n          notification={notification}></WelcomeArea>\n        <ChatArea\n          isVisible={connected}\n          chat={chat}\n          typing={typing}\n          messageOut={messageOut}\n          onMessageChange={onMessageChange}\n          onMessageSend={sendMessage}></ChatArea>\n      </Body>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}