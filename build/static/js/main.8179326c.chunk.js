(this["webpackJsonpweb-sockets-chat"]=this["webpackJsonpweb-sockets-chat"]||[]).push([[0],{40:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(34),i=n.n(c),r=(n(40),n(15)),o=n(7),u=n(35),l=(n(72),n(0));var m,b=function(e){return Object(l.jsx)("header",{className:"App-header",children:Object(l.jsx)("h1",{children:e.title})})};function j(e){return Object(l.jsx)("main",{children:Object(l.jsx)("div",{children:e.children})})}function d(e){return Object(l.jsx)("div",{className:e.type,children:Object(l.jsx)(e.elem,{children:e.message})})}function g(e){var t=e.form;return Object(l.jsxs)("form",{onSubmit:e.onFormSubmit,className:t.class,method:"POST",children:[Object(l.jsx)("input",{type:"text",name:"name",autoComplete:"off",className:t.input.class,placeholder:t.input.placeholder,"aria-label":t.input.ariaLabel,value:e.inputValue,onChange:function(t){return e.onInputChange(t)}}),Object(l.jsx)("button",{type:"submit",className:"button",children:t.buttonText})]})}function h(e){return e.isVisible?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"welcome-area",children:Object(l.jsx)(g,{form:{input:{placeholder:"Please enter your name...",ariaLabel:"Enter a name to be used in the chat room",class:"welcome-area-form-input"},buttonText:"Send",class:"welcome-area-form"},inputValue:e.name,onInputChange:function(t){e.onNameChange(t)},onFormSubmit:function(t){e.onNameSubmit(t)}})}),e.hasAnyConnectionError?Object(l.jsx)(d,{type:"error",elem:"p",message:e.notification.message}):null]}):null}function p(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t&&t.current&&(t.current.scrollIntoView(!0),document.querySelector(".chat-area .chat-area-box").scrollTop+=10)})),Object(l.jsxs)("div",{className:e.type,children:[Object(l.jsx)("div",{className:"sender",children:e.sender}),Object(l.jsx)("div",{className:"message",children:Object(l.jsx)("span",{ref:t,children:e.message})})]})}function O(e){return e.messages.length>0?Object(l.jsx)("div",{className:"message-list",children:e.messages.map((function(e,t){return Object(l.jsx)(p,{type:e.type,sender:e.name||null,message:e.message},e.id||t)}))}):null}function f(e){return e.isVisible?Object(l.jsxs)("div",{className:"chat-area",children:[Object(l.jsxs)("div",{className:"chat-area-box",children:[Object(l.jsx)(O,{messages:e.chat}),e.typing.enabled?Object(l.jsx)(d,{type:"temporary",elem:"span",message:e.typing.message}):null]}),Object(l.jsx)("div",{className:"chat-area-form-wrapper",children:Object(l.jsx)(g,{form:{input:{placeholder:"Write a message ...",ariaLabel:"Enter message to send",class:"chat-area-form-input"},buttonText:"Send",class:"chat-area-form"},inputValue:e.messageOut,onInputChange:function(t){e.onMessageChange(t)},onFormSubmit:function(t){e.onMessageSend(t)}})})]}):null}!function(e){e.TITLE="Silviu's Chat Application",e.WELCOME="Welcome, "}(m||(m={}));var x=Object(u.io)("/",{transports:["polling"]});var v=function(){var e=Object(a.useState)(m.TITLE),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),i=Object(o.a)(c,2),u=i[0],d=i[1],g=Object(a.useState)(""),p=Object(o.a)(g,2),O=p[0],v=p[1],y=Object(a.useState)(""),S=Object(o.a)(y,2),N=S[0],C=S[1],E=Object(a.useState)([]),T=Object(o.a)(E,2),w=T[0],L=T[1],F=Object(a.useState)({message:"",enabled:!1}),I=Object(o.a)(F,2),V=I[0],M=I[1],A=Object(a.useState)({message:"",type:"message"}),k=Object(o.a)(A,2),P=k[0],W=k[1],D=Object(a.useState)(!1),B=Object(o.a)(D,2),J=B[0],q=B[1];Object(a.useEffect)((function(){x.on("message",(function(e){var t=e.message,n=e.sender;L((function(e){return[].concat(Object(r.a)(e),[{id:e.length+1,name:n,message:t,type:"message-in"}])})),M({enabled:!1,message:""})})),x.on("typing",(function(e){M({enabled:!0,message:e}),setTimeout((function(){M({enabled:!1,message:""})}),4e3)}))}),[]);var R=function(){var e={id:w.length+1,name:O,message:N,type:"message-out"};x.emit("send message",e),L([].concat(Object(r.a)(w),[e])),M({enabled:!1,message:""}),C("")};return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(b,{title:n}),Object(l.jsxs)(j,{children:[Object(l.jsx)(h,{isVisible:!u,name:O,onNameSubmit:function(e){e&&e.preventDefault(),u||(x.emit("join room",{name:O}),x.on("connection success",(function(e){d(!0),s(m.WELCOME+O),W({message:e,type:"message"}),L((function(t){return[].concat(Object(r.a)(t),[{id:t.length+1,message:e,type:"notification"}])})),q(!1)})),x.on("connection error",(function(e){d(!1),W({message:e,type:"error"}),q(!0)})))},onNameChange:function(e){v(e.target.value||"")},hasAnyConnectionError:J,notification:P}),Object(l.jsx)(f,{isVisible:u,chat:w,typing:V,messageOut:N,onMessageChange:function(e){x.emit("start typing",{name:O}),C(e.target.value||"")},onMessageSend:function(e){e&&e.preventDefault(),u&&R()}})]})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root")),y()}},[[74,1,2]]]);
//# sourceMappingURL=main.8179326c.chunk.js.map